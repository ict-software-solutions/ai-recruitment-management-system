<div id="profile" class="page-layout carded fullwidth inner-scroll">
  <div class="ex-1">
    <div class="center">
      <div class="content-card" style="height: 700px !important;">
        <div class="mb-24" fxLayout="column" fxLayoutAlign="start" fxLayout.gt-md="row"
          style="margin-left: 10px; margin-top: 10px; margin-right: 10px;">
          <form class="mat-card mat-elevation-z4 p-24 mr-24" fxLayout="column" fxLayoutAlign="start" fxFlex="1 0 auto"
            name="form" [formGroup]="form" style="height: 650px !important;">
            <header class="accent" style="height: 80px; font-size: bold; font-size: 17px; padding: 16px;">
              <div class="title">
                <img class="profile-image avatar" src="assets/images/avatars/Nancy.jpg"
                  style="margin: -7px 8px -10px -7px;" />
                <span style="margin-left: -32px;">
                  <button mat-mini-fab color="accent" aria-label="Example icon button with a filter list icon"
                    style="margin-top: 16px;">
                    <mat-icon>local_see</mat-icon>
                  </button>
                  <!-- <button mat-icon-button color="primary">
                    <mat-icon>local_see</mat-icon>
                </button> -->
                </span>
                <span>
                  <label for="file-upload" class="custom-file-upload"> </label>
                  <input id="file-upload" type="file" (input)="uploadFile($event)"
                    style="width: 27px; height: 19px; margin-left: -45px; margin-top: 4px; opacity: 0;" />
                </span>

                <div style="display: inline;">
                  <button mat-icon-button color="light" (click)="Edit()" *ngIf="!enableEdit"
                    style="float: right; margin-right: 10px;">
                    <mat-icon style="line-height: 13px;">edit</mat-icon>Edit
                  </button>
                </div>
                <button mat-raised-button color="light" *ngIf="enableEdit" class="submit-button"
                  style="margin-right: -2px; width: 100px; float: right; padding: 5px;"
                  (click)="updateProfile(form.value)"  >
                  Save
                </button>
                <button mat-raised-button color="light" (click)="Edit()" *ngIf="enableEdit" class="submit-button"
                  style="margin-right: 10px; width: 100px; float: right; padding: 5px;" (click)="canceledit()">
                  Cancel
                </button>
              </div>
              <h1 style="margin-left: 20px; display: inline; position: relative;" *ngIf="getRole">My Profile</h1>
              <h1 style="margin-left: 20px; display: inline; position: relative;" *ngIf="getRole===false" >New User</h1>
            </header>

            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto" style="margin-top: 20px;">
              <mat-form-field appearance="outline" fxFlex="33" class="pr-4">
                <mat-label>First Name</mat-label>
                <input matInput type="text"  formControlName="firstName" type="text" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">account_circle</mat-icon>
                <!-- <mat-error>First Name is required!</mat-error> -->
              </mat-form-field>
              <mat-form-field appearance="outline" fxFlex="34" class="pr-4">
                <mat-label>Middle Name</mat-label>
                <input matInput type="text"  formControlName="middleName" type="text" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">account_circle</mat-icon>
                <!-- <mat-error>First Name is required!</mat-error> -->
              </mat-form-field>
              <mat-form-field appearance="outline" fxFlex="34">
                <mat-label>Last name</mat-label>
                <input matInput type="text" formControlName="lastName" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">account_circle</mat-icon>
                <!-- <mat-error>Last Name is required!</mat-error> -->
              </mat-form-field>
            </div>
            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
              <mat-form-field appearance="outline" fxFlex="50" class="pr-4">
                <mat-label>Email <span style="color: green;">
                    <mat-icon>check_circle</mat-icon>
                  </span></mat-label>
                <input matInput type="email" formControlName="emailAddress" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">mail</mat-icon>
                <!-- <mat-error>Email is required!</mat-error> -->
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="50" class="pl-4">
                <mat-label>Mobile <span style="color: red;">
                    <mat-icon>error_outline</mat-icon>
                  </span></mat-label>
                <input matInput type="tel" formControlName="mobileNumber" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">call</mat-icon>
                <!-- <mat-error>Mobile is required!</mat-error> -->
              </mat-form-field>
            </div>

            <div fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="1 0 auto" *ngIf="getUserById === true">
              <mat-form-field appearance="outline" fxFlex="50" class="pr-4">
                <mat-label>Company Name</mat-label>
                <input matInput type="text" formControlName="companyname" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">location_city</mat-icon>
              </mat-form-field>
              <mat-form-field appearance="outline" fxFlex="50" class="pl-4">
                <mat-label>Position</mat-label>
                <input matInput type="text" formControlName="position" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">work_outline</mat-icon>
              </mat-form-field>
            </div>

            <div fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="1 0 auto" *ngIf="getUserById === true">
              <mat-form-field appearance="outline" fxFlex="100">
                <mat-label>Address</mat-label>
                <textarea matInput formControlName="address" max-rows="5" [readonly]="viewMode"> </textarea>
              </mat-form-field>
            </div>
            <div></div>
            <br />

            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto" *ngIf="getUserById === true">
              <mat-form-field appearance="outline" fxFlex="25">
                <mat-label>Postal Code</mat-label>
                <input matInput type="tel" #postalcode value="94043" formControlName="postalcode" maxlength="5"
                  [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">markunread_mailbox</mat-icon>
              </mat-form-field>
              <mat-form-field appearance="outline" fxFlex="25" class="px-8">
                <mat-label>City</mat-label>
                <input matInput type="text" formControlName="city" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">location_city</mat-icon>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="25" class="px-8">
                <mat-label>State</mat-label>
                <input matInput type="text" formControlName="state" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">location_city</mat-icon>
              </mat-form-field>
              <mat-form-field appearance="outline" fxFlex="25">
                <mat-label>Country</mat-label>
                <input matInput type="text" formControlName="country" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">flag</mat-icon>
              </mat-form-field>
            </div>

            <br />
            <div fxLayout="row" style="margin-top: -35px;" fxLayoutAlign="start center" fxFlex="1 0 auto"
              *ngIf="getUserById === false">
              <!-- <mat-form-field fxFlex="30"  appearance="outline"> -->
              <mat-form-field appearance="outline" fxFlex="33" >
                <mat-label>User Type</mat-label>
                 <mat-select [disabled]="viewMode" formControlName="userType">
                  <mat-option *ngFor="let usertype of usertypes" [value]="usertype.value">
                    {{ usertype.value }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <!-- <mat-form-field fxFlex="30"  appearance="outline"> -->
              <mat-form-field appearance="outline" fxFlex="34" class="px-8" >
                <mat-label>User Role</mat-label>
                <mat-select [disabled]="viewMode" formControlName="roleName">
                  <mat-option *ngFor="let rolename of roleNames" [value]="rolename.value" >
                    {{ rolename.value }}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="33">
                <mat-label>Valid From</mat-label>
                <input matInput [matDatepicker]="picker1" name="validFrom" formControlName="validFrom"
                  [readonly]="viewMode" />
                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                <mat-datepicker #picker1></mat-datepicker>
              </mat-form-field>
            </div>

            <!-- <div fxLayout="row" fxLayoutAlign="space-between"> -->
            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto" *ngIf="getUserById === false">
              <mat-form-field appearance="outline" fxFlex="33">
                <mat-label>Password Since</mat-label>
                <input matInput [matDatepicker]="picker2" name="passwordSince" formControlName="passwordSince"
                  [readonly]="viewMode" />
                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                <mat-datepicker #picker2></mat-datepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="34" class="px-8">
                <mat-label>Password Expiry Date</mat-label>
                <input matInput [matDatepicker]="picker3" name="passwordExpiryDate" formControlName="passwordExpiry"
                  [readonly]="viewMode" />
                <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                <mat-datepicker #picker3></mat-datepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="33">
                <mat-label>Valid To</mat-label>
                <input matInput [matDatepicker]="picker4" name="validTo" formControlName="validTo"
                  [readonly]="viewMode" />
                <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                <mat-datepicker #picker4></mat-datepicker>
              </mat-form-field>
            </div>

            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
              <div fxFlex="35" appearance="outline" *ngIf="getUserById === false">
                <section class="tp-section" *ngIf="enableEdit">
                  <label class="example-margin">Account Status:</label>&nbsp;
                  <input type="radio" value="activated" [checked]="true" name="status"  /> Activated &nbsp;
                  <input type="radio" value="locked" name="status"  /> Locked
                </section>
              </div>
              <div fxFlex="16" appearance="outline">
                <mat-checkbox
                  (change)="changePassword($event.checked)"
                  (click)="onValueChange()"
                  *ngIf="enableEdit && getRole"
                  formControlName="check"
                  >Change Password</mat-checkbox
                >
              </div>
              <mat-form-field appearance="outline" fxFlex="25" *ngIf="showPasswordsection && enableEdit"
                style="left: 5px;">
                <mat-label>Current Password</mat-label>
                <input matInput type="password" [type]="hide ? 'password' : 'text'" formControlName="password"
                  required />
                <mat-icon matSuffix class="secondary-text1" (click)="hide = !hide">
                  {{ hide ? "visibility_off" : "visibility" }}</mat-icon>
                <mat-error>
                  Password is required
                </mat-error>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="25" class="px-8" *ngIf="showPasswordsection && enableEdit">
                <mat-label>New Password</mat-label>
                <input matInput type="Password" [type]="hide1 ? 'password' : 'text'" formControlName="newPassword"
                  pattern="((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*?/]).{8,15})" required />
                <mat-icon matSuffix class="secondary-text1" (click)="hide1 = !hide">
                  {{ hide1 ? "visibility_off" : "visibility" }}</mat-icon>
                <mat-error *ngIf="form.get('newPassword').hasError('required')">New password is required </mat-error>
                <mat-error *ngIf="form.get('newPassword').hasError('minlength')">Password too short!! Password should
                  have a minimum of 8 characters.</mat-error>
                <mat-error
                  *ngIf="form.get('newPassword').hasError('pattern') && form.get('newPassword').value.length > 7">
                  Make your password strong use(A-Z,a-z,0-9,(*@!?/)</mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline" fxFlex="32" *ngIf="enableEdit && getRole === false" style="left: -166px;">
                <mat-label>Password</mat-label>
                <input
                  matInput
                  type="password"
                  [type]="hide2 ? 'password' : 'text'"
                  formControlName="passwordNew"
                  pattern="((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*?/]).{8,15})"
                  required
                />
                <mat-icon matSuffix class="secondary-text1" (click)="hide2 = !hide2">
                  {{ hide2 ? "visibility_off" : "visibility" }}</mat-icon
                >
                <mat-error *ngIf="form.get('passwordNew').hasError('required')">
                  Password is required
                </mat-error>
                <mat-error *ngIf="form.get('passwordNew').hasError('minlength')">
                  Password too short!! Password should have a minimum of 8 characters.
                </mat-error>
                <mat-error *ngIf="form.get('passwordNew').hasError('pattern') && form.get('passwordNew').value.length > 7">
                  Make your password strong use(A-Z,a-z,0-9,(*@!?/)
                </mat-error>
              </mat-form-field>
            </div>

            <!-- <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto" style="margin-top: 20px;" style="float:left;"> -->
            <p style="text-align: right;">Last Login: {{ lastLogin }}</p>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>