<div id="profile" class="page-layout carded fullwidth inner-scroll">
  <div class="ex-1">
    <div class="center">
      <div class="content-card" style="height: 700px !important;">
        <div class="mb-24" fxLayout="column" fxLayoutAlign="start" fxLayout.gt-md="row">
          <form class="mat-card mat-elevation-z4 p-24 mr-24" fxLayout="column" fxLayoutAlign="start" fxFlex="1 0 auto"
            name="form" [formGroup]="form" style="height: 650px !important;">
            <header class="accent" style="height: 80px; font-size: bold; font-size: 17px; padding: 16px;">
              <div class="title">
                <div id="photos">
                  <img class="profile-image avatar" src="assets/images/avatars/generic.jpg"
                    style="margin: -7px 8px -10px -7px;" />
                </div>
                <div style="    margin-left: 32px;
                /* margin-left: 32px; */
                margin-top: -27px;">
                  <button mat-mini-fab color="accent" aria-label="Example icon button with a filter list icon">
                    <mat-icon>local_see</mat-icon>
                  </button>
                  <input id="file-upload" type="file" (input)="uploadFile($event)" style="      margin-left: -90px;
                  margin-top: 8px;
                  opacity: 0;
                  cursor: pointer;
                  height: 46px;" />

                </div>

                <div style="margin-top: -78px;
                margin-left: 85px;">
                  <h1 *ngIf="getUserById === false && userId != 0">
                    Edit Info
                  </h1>
                  <h1 *ngIf="getRole === false && userId === 0">Add User</h1>
                  <h1 *ngIf="getUserById === true">My
                    Profile</h1>
                </div>

                <div style="float: right;
                margin-top: -60px;
                display: flex;">
                  <button mat-icon-button color="light" (click)="Edit()" *ngIf="!enableEdit"
                    style="margin-right: 17px;">
                    <mat-icon style="line-height: 13px;">edit</mat-icon>Edit
                  </button>


                  <button mat-raised-button color="light" *ngIf="enableEdit && getRole" class="submit-button" style="margin-right: 10px;
                  width: 100px;
                  padding: 5px;" (click)="updateProfile(form.value)">
                    Save
                  </button>
                  <button mat-raised-button color="light" class="submit-button"
                    style="margin-right: 10px; width: 100px;" *ngIf="getRole === false && userId === 0"
                    (click)="updateProfile(form.value)">
                    Add
                  </button>
                  <button mat-raised-button color="light" class="submit-button"
                    style="margin-right: -2px; width: 100px;" *ngIf="getUserById === false && userId != 0"
                    (click)="updateProfile(form.value)">
                    Update
                  </button>
                  <button mat-raised-button color="light" (click)="Edit()" *ngIf="enableEdit && getUserById === false"
                    class="submit-button" style="margin-right: 10px; width: 100px; padding: 5px;"
                    (click)="canceledit()">
                    Cancel
                  </button>
                  <button mat-raised-button color="light" (click)="Edit()" *ngIf="enableEdit && getUserById === true"
                    class="submit-button" style="margin-right: 10px; width: 100px;  padding: 5px;" (click)="edit()">
                    Cancel
                  </button>
                </div>

              </div>

            </header>

            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="0 0 auto" style="margin-top: 18px;">
              <mat-form-field appearance="outline" fxFlex="33" class="pr-4">
                <mat-label>First Name</mat-label>
                <input matInput type="text" formControlName="firstName" type="text" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">account_circle</mat-icon>
                <!-- <mat-error>First Name is required!</mat-error> -->
              </mat-form-field>
              <mat-form-field appearance="outline" fxFlex="34" class="pr-4">
                <mat-label>Middle Name</mat-label>
                <input matInput type="text" formControlName="middleName" type="text" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">account_circle</mat-icon>
                <!-- <mat-error>First Name is required!</mat-error> -->
              </mat-form-field>
              <mat-form-field appearance="outline" fxFlex="34">
                <mat-label>Last name</mat-label>
                <input matInput type="text" formControlName="lastName" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">account_circle</mat-icon>
                <!-- <mat-error>Last Name is required!</mat-error> -->
              </mat-form-field>
            </div>
            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="0 0 auto">
              <mat-form-field appearance="outline" fxFlex="50" class="pr-4">
                <mat-label>Email
                  <span style="color: green;">
                    <mat-icon>check_circle</mat-icon>
                  </span>
                </mat-label>
                <input matInput type="email" formControlName="emailAddress" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">mail</mat-icon>
                <mat-error *ngIf="form.get('emailAddress').hasError('required')"> Email id is required</mat-error>
                <mat-error
                  *ngIf="!form.get('emailAddress').hasError('required') && form.get('emailAddress').hasError('pattern')">
                  Please enter a valid email address
                </mat-error>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="50" class="pl-4">
                <mat-label>Mobile
                  <span style="color: red;">
                    <mat-icon>error_outline</mat-icon>
                  </span></mat-label>
                <input matInput type="tel" formControlName="mobileNumber" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">call</mat-icon>
                <!-- <mat-error>Mobile is required!</mat-error> -->
              </mat-form-field>
            </div>

            <div fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="0 0 auto" *ngIf="getUserById === true">
              <mat-form-field appearance="outline" fxFlex="50" class="pr-4">
                <mat-label>Company Name</mat-label>
                <input matInput type="text" formControlName="companyname" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">location_city</mat-icon>
              </mat-form-field>
              <mat-form-field appearance="outline" fxFlex="50" class="pl-4">
                <mat-label>Position</mat-label>
                <input matInput type="text" formControlName="position" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">work_outline</mat-icon>
              </mat-form-field>
            </div>

            <div fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="0 0 auto" *ngIf="getUserById === true">
              <mat-form-field appearance="outline" fxFlex="100">
                <mat-label>Address</mat-label>
                <textarea matInput formControlName="address" max-rows="7" [readonly]="viewMode"> </textarea>
              </mat-form-field>
            </div>


            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="0 0 auto" *ngIf="getUserById === true"
              style="margin-top: 17px;">
              <mat-form-field appearance="outline" fxFlex="23" class="pr-4">
                <mat-label>Postal Code</mat-label>
                <input matInput type="tel" #postalcode value="94043" formControlName="postalcode" maxlength="5"
                  [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">markunread_mailbox</mat-icon>
              </mat-form-field>
              <mat-form-field appearance="outline" fxFlex="25" class="pr-4">
                <mat-label>City</mat-label>
                <input matInput type="text" formControlName="city" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">location_city</mat-icon>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="23" class="pr-4">
                <mat-label>State</mat-label>
                <input matInput type="text" formControlName="state" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">location_city</mat-icon>
              </mat-form-field>
              <mat-form-field appearance="outline" fxFlex="30">
                <mat-label>Country</mat-label>
                <input matInput type="text" formControlName="country" [readonly]="viewMode" />
                <mat-icon matSuffix class="secondary-text">flag</mat-icon>
              </mat-form-field>
            </div>


            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="0 0 auto" *ngIf="getUserById === false">
              <!-- <mat-form-field fxFlex="30"  appearance="outline"> -->
              <mat-form-field appearance="outline" fxFlex="33">
                <mat-label>User Type</mat-label>
                <mat-select [disabled]="viewMode" formControlName="userType">
                  <mat-option *ngFor="let usertype of usertypes" [value]="usertype.value">
                    {{ usertype.value }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <!-- <mat-form-field fxFlex="30"  appearance="outline"> -->
              <mat-form-field appearance="outline" fxFlex="34" class="px-8">
                <mat-label>User Role</mat-label>
                <mat-select [disabled]="viewMode" formControlName="roleId">
                  <mat-option *ngFor="let roleList of roleLists" [value]="roleList.roleId">
                    {{ roleList.roleName }}
                  </mat-option>
                </mat-select>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="33" *ngIf="getUserById === false && userId != 0">
                <mat-label>Valid From</mat-label>
                <input matInput [matDatepicker]="picker1" name="validFrom" formControlName="validFrom"
                  [readonly]="viewMode" />
                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                <mat-datepicker #picker1></mat-datepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="33" *ngIf="getRole === false && userId === 0">
                <mat-label>User Name</mat-label>
                <input matInput formControlName="userName" pattern="[a-zA-Z][a-z0-9_.-]*" required>
                <mat-icon matSuffix class="secondary-text">account_circle</mat-icon>
                <mat-error *ngIf="form.get('userName').hasError('required')"> User name is required
                </mat-error>
                <mat-error *ngIf="form.get('userName').hasError('minlength')">User name must be at least 6
                  charecters</mat-error>
                <mat-error *ngIf="form.get('userName').hasError('pattern') && form.get('userName').value.length > 5">
                  Please enter valid user name use(A-Z,a-z,0-9,_/-)</mat-error>
              </mat-form-field>

            </div>

            <!-- <div fxLayout="row" fxLayoutAlign="space-between"> -->
            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="0 0 auto"
              *ngIf="getUserById === false && userId != 0">
              <mat-form-field appearance="outline" fxFlex="33">
                <mat-label>Password Since</mat-label>
                <input matInput [matDatepicker]="picker2" name="passwordSince" formControlName="passwordSince"
                  [readonly]="viewMode" />
                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                <mat-datepicker #picker2></mat-datepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="34" class="px-8">
                <mat-label>Password Expiry Date</mat-label>
                <input matInput [matDatepicker]="picker3" name="passwordExpiryDate" formControlName="passwordExpiry"
                  [readonly]="viewMode" />
                <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                <mat-datepicker #picker3></mat-datepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="33">
                <mat-label>Valid To</mat-label>
                <input matInput [matDatepicker]="picker4" name="validTo" formControlName="validTo"
                  [readonly]="viewMode" />
                <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                <mat-datepicker #picker4></mat-datepicker>
              </mat-form-field>
            </div>

            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="0 0 auto"
              *ngIf="getUserById === false && userId != 0">
              <div fxFlex="35" appearance="outline">
                <section class="tp-section">
                  <label class="example-margin">Account Status:</label>&nbsp;
                  <input type="radio" value="activated" [checked]="true" name="status" /> Activated &nbsp;
                  <input type="radio" value="locked" name="status" /> Locked
                </section>
              </div>
              <div fxFlex="16" appearance="outline">
                <mat-checkbox (change)="changePassword($event.checked)" (click)="onValueChange()"
                  formControlName="check">Change Password</mat-checkbox>
              </div>

              <mat-form-field appearance="outline" fxFlex="25" class="px-8"
                *ngIf="showPasswordsection && enableEdit && getUserById === false && userId != 0">
                <mat-label>New Password</mat-label>
                <input matInput type="Password" [type]="hide1 ? 'password' : 'text'" formControlName="newPassword"
                  pattern="((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*?/]).{8,15})" required />
                <mat-icon matSuffix class="secondary-text1" (click)="hide1 = !hide">
                  {{ hide1 ? "visibility_off" : "visibility" }}</mat-icon>
                <mat-error *ngIf="form.get('newPassword').hasError('required')">New password is required </mat-error>
                <mat-error *ngIf="form.get('newPassword').hasError('minlength')">Password too short!! Password should
                  have a minimum of 8 characters.</mat-error>
                <mat-error
                  *ngIf="form.get('newPassword').hasError('pattern') && form.get('newPassword').value.length > 7">
                  Make your password strong use(A-Z,a-z,0-9,(*@!?/)</mat-error>
              </mat-form-field>
            </div>

            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="0 0 auto"
              *ngIf="getRole === false && userId === 0">

              <mat-form-field appearance="outline" fxFlex="33">
                <mat-label>Valid From</mat-label>
                <input matInput [matDatepicker]="picker1" name="validFrom" formControlName="validFrom"
                  [readonly]="viewMode" />
                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                <mat-datepicker #picker1></mat-datepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="34" class="px-8">
                <mat-label>Valid To</mat-label>
                <input matInput [matDatepicker]="picker4" name="validTo" formControlName="validTo"
                  [readonly]="viewMode" />
                <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                <mat-datepicker #picker4></mat-datepicker>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="33">
                <mat-label>Password</mat-label>
                <input matInput type="password" [type]="hide2 ? 'password' : 'text'" formControlName="newPassword"
                  pattern="((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*?/]).{8,15})" required />
                <mat-icon matSuffix class="secondary-text1" (click)="hide2 = !hide2">
                  {{ hide2 ? "visibility_off" : "visibility" }}</mat-icon>
                <mat-error *ngIf="form.get('newPassword').hasError('required')">
                  Password is required
                </mat-error>
                <mat-error *ngIf="form.get('newPassword').hasError('minlength')">
                  Password too short!! Password should have a minimum of 8 characters.
                </mat-error>
                <mat-error
                  *ngIf="form.get('newPassword').hasError('pattern') && form.get('newPassword').value.length > 7">
                  Make your password strong use(A-Z,a-z,0-9,(*@!?/)
                </mat-error>
              </mat-form-field>
            </div>

            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="0 0 auto"
              *ngIf="getUserById === true && enableEdit">
              <div fxFlex="35" appearance="outline">
                <section class="tp-section">
                  <label class="example-margin">Account Status:</label>&nbsp;
                  <input type="radio" value="activated" [checked]="true" name="status" /> Activated &nbsp;
                  <input type="radio" value="locked" name="status" /> Locked
                </section>
              </div>
              <div fxFlex="16" appearance="outline">
                <mat-checkbox (change)="changePassword($event.checked)" (click)="onValueChange()"
                  formControlName="check">Change Password</mat-checkbox>
              </div>
              <mat-form-field appearance="outline" fxFlex="25" style="left: 5px;" *ngIf="showPasswordsection">
                <mat-label>Current Password</mat-label>
                <input matInput type="password" [type]="hide ? 'password' : 'text'" formControlName="password"
                  required />
                <mat-icon matSuffix class="secondary-text1" (click)="hide = !hide">
                  {{ hide ? "visibility_off" : "visibility" }}</mat-icon>
                <mat-error>
                  Password is required
                </mat-error>
              </mat-form-field>

              <mat-form-field appearance="outline" fxFlex="25" class="px-8" *ngIf="showPasswordsection">
                <mat-label>New Password</mat-label>
                <input matInput type="Password" [type]="hide1 ? 'password' : 'text'" formControlName="newPassword"
                  pattern="((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*?/]).{8,15})" required />
                <mat-icon matSuffix class="secondary-text1" (click)="hide1 = !hide">
                  {{ hide1 ? "visibility_off" : "visibility" }}</mat-icon>
                <mat-error *ngIf="form.get('newPassword').hasError('required')">New password is required </mat-error>
                <mat-error *ngIf="form.get('newPassword').hasError('minlength')">Password too short!! Password should
                  have a minimum of 8 characters.</mat-error>
                <mat-error
                  *ngIf="form.get('newPassword').hasError('pattern') && form.get('newPassword').value.length > 7">
                  Make your password strong use(A-Z,a-z,0-9,(*@!?/)</mat-error>
              </mat-form-field>
            </div>

            <!-- <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto" style="margin-top: 20px;" style="float:left;"> -->
            <p style="text-align: right;">Last Login: {{ lastLogin }}</p>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>